---
title: ä½¿ç”¨vuepressæ­å»ºé™æ€ç½‘ç«™
tags:
  - node
  - cli
  - vue-cli
  - create-react-app
date: 2019-11-25
permalink: 2019-11-25-build-your-website-with-vuepress
---

## èµ·å› 

æ—§çš„hexoä¸»é¢˜ä¸æ€ä¹ˆå¥½çœ‹, vuepressçš„é»˜è®¤ä¸»é¢˜æ¸…çˆ½, ä¹Ÿæ–¹ä¾¿è‡ªå·±DIY, äºæ˜¯å¼€å§‹äº†æ”¹é€ æ´»åŠ¨. è¿‡ç¨‹ä¸­æœ‰è¸©äº†ä¸€ç‚¹å‘, ä¹Ÿç•™æ„åˆ°ä¸€äº›ä¹‹å‰æ²¡æœ‰ç•™æ„åˆ°çš„ä¸œè¥¿, è®°å½•ä¸€ä¸‹.

## ä¸¤ç§github page

åœ¨vuepressä¸­æœ‰ä¸‹é¢ä¸¤è¡Œæ–‡æ¡£

```js
# if you are deploying to https://<USERNAME>.github.io
# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master

# if you are deploying to https://<USERNAME>.github.io/<REPO>
# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages
```

æ¯ä¸ªè´¦æˆ·å¯ä»¥å»ºç«‹ä¸€ä¸ªusername.github.ioçš„çš„ä»“åº“ç”¨æ¥æ‰˜ç®¡ä¸ªäººç½‘ç«™, ä»£ç åªèƒ½å¤Ÿæ”¾åœ¨masteråˆ†æ”¯ä¸Š, å¦‚ä¸‹é¢çš„ä»“åº“å¯ä»¥é€šè¿‡chenxiaoyao6228.github.ioè¿›è¡Œè®¿é—®
![2019-11-25-04-20-45](http://blog.chenxiaoyao.cn/image/2019/10/2019-11-25-04-20-45.png)

å¦å¤–ä¸€ç§åˆ™æ˜¯ä¸ºæ¯ä¸ªé¡¹ç›®å•ç‹¬è®¾ç«‹çš„ä»“åº“, æ¯”å¦‚ä½ å†™äº†ä¸€ä¸ªç»„ä»¶åº“, ä¸»ä»£ç æ‰˜ç®¡åœ¨masteråˆ†æ”¯, å±•ç¤ºçš„ä»£ç æ”¾åœ¨gh-pageåˆ†æ”¯ä¸Š, ä½†æ˜¯è®¿é—®åªèƒ½æ˜¯`chenxiaoyao6228.github.io/one-ui`çš„æ–¹å¼

![2019-11-25-04-29-53](http://blog.chenxiaoyao.cn/image/2019/10/2019-11-25-04-29-53.png)

åœ¨å¼€å‘è‡ªå·±çš„vuepressåšå®¢çš„æ—¶å€™,è‡ªå·±çš„ä»“åº“åæ˜¯`blog`,é€‰æ‹©ç¬¬ä¸€ç§,ç”Ÿæˆçš„é™æ€æ–‡ä»¶ä¼špushåˆ°`chenxiaoyao6228.github.io`ä»“åº“çš„masteråˆ†æ”¯ä¸Š,åä¹‹, åˆ™æŒ‚åœ¨blogä»“åº“çš„masterå’Œgh-pageç›®å½•ä¸‹

åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„ç¬¬äºŒç§æƒ…å†µä¸‹éœ€è¦åŠ baseå­—æ®µåˆ°

```js
Set correct base in docs/.vuepress/config.js.

If you are deploying to https://<USERNAME>.github.io/, you can omit base as it defaults to "/".

If you are deploying to https://<USERNAME>.github.io/<REPO>/, (that is your repository is at https://github.com/<USERNAME>/<REPO>), set base to "/<REPO>/".
```

## è‡ªå®šä¹‰åŸŸå

### ç”Ÿæˆcnameæ–‡ä»¶

```bash
#  ç”Ÿæˆcnameæ–‡ä»¶, ç”¨äºè‡ªå®šä¹‰åŸŸå, ä¸è¦http, wwwå¼€å¤´, åˆ‡è®°!
 echo 'chenxiaoyao.cn' > CNAME
```

### å¤šä¸ªgh-pageä½¿ç”¨ç›¸åŒçš„åŸŸå

ä¸€ç§åŠæ³•æ˜¯ä½¿ç”¨å­åŸŸåæ¥è§£å†³, å¦‚blog.chenxiaoyao.cn

## travisæŒç»­é›†æˆ

æ¯æ¬¡å†™å®Œåšå®¢åï¼Œéƒ½éœ€è¦å…ˆpushä»£ç åˆ°ä»“åº“, ç„¶åè‡ªå·±åœ¨æœ¬åœ°run buildå°†Markdownè½¬æ¢æˆé¡µé¢ï¼Œå†pushåˆ°ä»“åº“çš„gh-pagesåˆ†æ”¯, æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å®ç°pushä»£ç ä¹‹åè‡ªåŠ¨éƒ¨ç½²å‘¢?

æŒç»­é›†æˆå·¥å…·å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜, å¸¸è§çš„å·¥å…·å¦‚circle-ci, travis-ci. vuepressä½¿ç”¨äº†travis-ciä½œä¸ºä¾‹å­.

### bashå‘½ä»¤

```bash
set -e

# ç”Ÿæˆé™æ€æ–‡ä»¶
npm run build
cd .vuepress/dist

#  ç”Ÿæˆcnameæ–‡ä»¶, ç”¨äºè‡ªå®šä¹‰åŸŸå, ä¸è¦http, wwwå¼€å¤´, åˆ‡è®°!
 echo 'chenxiaoyao.cn' > CNAME

git init
git add -A
git commit -m 'deploy'

#  ${GITHUB_TOKEN}ä¸ºtravisçš„deployé…ç½®, åœ¨é…ç½®çš„æ—¶å€™ä½¿ç”¨ $GITHUB_TOKEN
git push -f https://${GITHUB_TOKEN}@github.com/chenxiaoyao6228/blog.git master:gh-pages

cd -

rm -rf .vuepress/dist
```

### travisé…ç½®

travisé›†æˆçš„æ—¶å€™çš„æ—¶å€™æ˜¾ç¤º126é”™è¯¯, æœ‰ä¸¤ç§åŸå› , ä¸€æ˜¯ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶, å¦‚æ–‡ä»¶ç¬¬ä¸€è¡Œæ²¡æœ‰åŠ `#!/usr/bin/env sh`, ç¬¬äºŒç§ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•èµ‹äºˆæƒé™

```yml
script:
- chmod +x ./deploy.sh
````

$ä¸ºbashä½¿ç”¨æ—¶å€™çš„å˜é‡æ ‡å¿—,é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®çš„æ—¶å€™ä¸è¦åŠ ç¾å…ƒç¬¦å·(å‘½ä»¤è¡Œæ²¡å­¦å¥½ğŸ˜­)

```yml
deploy:
  github-token: "$GITHUB_TOKEN"
```

![2019-11-25-05-05-28](http://blog.chenxiaoyao.cn/image/2019/10/2019-11-25-05-05-28.png)

ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ä¼šç”Ÿæˆä¸‹é¢çš„å­—æ®µ

```yml
env:
  global:
  - secure: Rh1nxhdXvyLriK1BgFRX7oSaodTciJ9YHNv+8MNAVMIJGWf3asgTvnEDD7cKP6+ovPZfifkXwjtMYslv/YGGITr0j8KTC9aFbxQoJ3L+ICjYPX90InKkNu6cILW+xV26Xq7Tnjzxdvs3oghTuPq/kIDwEofyxHNtHm1P4TF7lUiyV0OrKDDiiEN5vREd2iKhN62+ptFQN8c50sh8bz4j0J52WIbjcs1QEd8EwdzSTn8k7fYtL+SoXZ1inMNUZm6QvHq+q0w/51comBITFSqYDi9uNo2y06if8h6jL7JhIHWP8Vc2QoZxP2x/JcDHAAczwuqzXH4/MxAJso5NXG8nbKw/yk16eu4o6MO9bSBe/o47HXmToQofjvYqyItPz7SQ9hOs7CJUbhO2L/TOXewc3juZwECoKCWQQlGyT1Q3H2GBzru+zH4TOmtD63Losn0kwwlY9+D4DAN9L2Xk+1IWWhxuEc7cPU4HIwljNlsRHIE9mYefGwd3uad2wkYSKLrP8UfLUCeAxHtlfEEaKr/sP92wKNmWPRPa+k7xT73suBb2e4L11ZWJkRudVppB52I5bRCV42JuLa7Ywfs+5AlpCNUk4dl2yFMnUe7FtYdY+rKsBZ7Zm3Q1Ulo2mbuN0vyRlb62AsjrnR8eMYDxe+vtmfa+iVE4NFJss5LuwgDASdY=

```

æ›´å¤šçš„çœ‹[å®˜ç½‘](https://docs.travis-ci.com/user/environment-variables#defining-variables-in-repository-settings
)

### vuepressæ„å»ºé”™è¯¯

```js
TypeError: Cannot read property 'match' of undefined
    at getHash (node_modules/@vuepress/theme-default/util/index.js:13:0)
    at isActive (node_modules/@vuepress/theme-default/util/index.js:47:0)
    at render (node_modules/@vuepress/theme-default/components/SidebarLink.vue:25:32)
```
https://github.com/vuejs/vuepress/issues/570
