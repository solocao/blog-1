---
title: 'å®ç°angluaræ‰‹è®°[é›¶]é¡¹ç›®åˆå§‹åŒ–'
date: 2019-07-11
tags:
  - angular
permalink: 2019-07-11-build-your-own-angular-0-project-setup
---

## å‰è¨€

### 2019.07.13

å»å¹´çœ‹è¿‡éƒ¨åˆ†ã€Šbuild-your-own-angularã€‹, æ”¶è·å¤šå¤š, ç°åœ¨äºŒåˆ·å¸Œæœ›æœ‰æ›´å¥½çš„ç†è§£, ç°åœ¨æ˜¯ 2019 å¹´, angular ä»½é¢æ˜¾ç„¶ä¸å¦‚ vue, react, jquery å®£å¸ƒé€€å‡ºå†å²èˆå°, æ˜¯å¦è¿˜æœ‰å¿…è¦çœ‹è¿™ä¸€æœ¬ä¹¦, æˆ‘çš„æƒ³æ³•æ˜¯: æ¡†æ¶æ˜¯ä¼šè¿‡æ—¶çš„, jquery ä¼š, vue å’Œ react ä¹Ÿä¼š, å”¯æœ‰æ¡†æ¶å†…åœ¨çš„ä¸œè¥¿ä¸ä¼šè¿‡æ—¶, æŒæ¡å†…æ ¸æ‰èƒ½è®©è‡ªå·±æˆä¸ºä¸€ä¸ªæ›´å¥½çš„å·¥ç¨‹å¸ˆ.

### 2020.07.20

ä¸€å¹´çš„æ—¶é—´å°±è¿™ä¹ˆè¿‡å»äº†, æ‰“ç®—åˆæŠŠæœ¬ä¹¦å®Œæ•´åœ°æ•²ä¸€é, é‡è¯»çš„åŸå› æœ‰ä»¥ä¸‹

1. ä¸Šæ¬¡é‡è¯»å®é™…ä¸Šæ²¡æœ‰å®Œæˆä»»åŠ¡, ååŠéƒ¨åˆ†æ˜¯æ²¡æœ‰æå®šçš„,å¸Œæœ›è‡ªå·±ä¸è¦åŠé€”è€ŒåºŸ
2. ä¹‹å‰å‚åŠ è¿‡ TDD å®æˆ˜è®­ç»ƒè¥, ä½†æ˜¯åªæ˜¯ç®€å•çš„çŸ¥é“ TDD è¿™ä¸ªä¸œè¥¿, è¦æƒ³çœŸæ­£æŒæ¡ä¸€å®šç¦»ä¸å¼€æŒç»­çš„å®è·µæ€»ç»“, **è¯¥å¦‚ä½•è®¾è®¡, æµ‹è¯•ç”¨ä¾‹å¦‚ä½•ç¼–å†™, å¦‚ä½•ç”¨æµ‹è¯•é©±åŠ¨å®ç°?**, è¿™æœ¬ä¹¦æ— ç–‘æ˜¯ä¸€ç§å¾ˆå¥½çš„å‚è€ƒ, åç»­ä¼šè¯•è¯•ç”¨ tdd å†™ä¸€ä¸ªç®€å•çš„ vue

## é…ç½®(æ–°)

### ç³»ç»Ÿ mac

- ä»£ç æ ¼å¼åŒ–: eslint + prettier + vscode
- æµ‹è¯•: jest + puppeteer
- es6+ è¯­æ³•: babel ç¼–è¯‘, å»æ‰æ—§é¡¹ç›®ä¸­çš„ä¸€äº›ä¾èµ–å¦‚ Lodash

é…ç½®å‚è€ƒåœ¨è¿™ ğŸ‘‰ ä¸ª[ä»“åº“](https://github.com/chenxiaoyao6228/js-jest-eslint-husky-starter.git)ä¸‹, æœ‰éœ€è¦å¯ä»¥å»çœ‹çœ‹

## é…ç½®(æ—§)

ä¸ºäº†é¿å…ä¸€äº›æ— æ„ä¹‰çš„è¸©å‘ v, è¿™é‡Œè®°å½•ä¸‹é¡¹ç›®åˆå§‹åŒ–çš„ä¸€äº›æƒ…å†µ, è‡ªåŠ¨åŒ–å·¥å…·ä¸€èŒ¬åˆä¸€èŒ¬, grunt, gulp, webpack, parcel, è¿™äº›éƒ½æ˜¯ä¸å¤ªé‡è¦çš„, å…ˆæŠŠæœ¬ä¹¦æœ¬è´¨çš„å†…å®¹å­¦ä¼š, åæœŸæœ‰æ—¶é—´çš„è¯ç”¨ typescript é‡æ„ä¸‹, å…ˆæŒ‰ç…§ä½œè€…çš„æ€è·¯æŠŠæœ¬ä¹¦ç†ä¸€é.

### ç³»ç»Ÿ: win10

### å…¨å±€çš„åŒ…ç‰ˆæœ¬, å¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤æŸ¥çœ‹

```
npm list -g --depth=0
```

```
+-- grunt@0.4.1
+-- grunt-cli@0.1.9
```

ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®‰è£…å³å¯

```
npm install -g grunt@0.4.1 grunt-cli@0.1.9 phantomjs@1.9.11
```

### å¼€å‘ä¾èµ–åŒ…ç‰ˆæœ¬

å°†ä¸‹é¢ä»£ç æ‹·è´åˆ° package.json, ç„¶åä½¿ç”¨ npm install æˆ–è€… yarn å³å¯

```
{
  "name": "my-own-angularjs",
  "version": "0.1.0",
  "license": "MIT",
  "devDependencies": {
    "browserify": "^13.0.0",
    "grunt-contrib-jshint": "2.1.0",
    "grunt-contrib-testem": "0.5.22",
    "jasmine-core": "^2.3.4",
    "jshint": "^2.8.0",
    "karma": "^0.13.15",
    "karma-browserify": "^5.0.4",
    "karma-jasmine": "^0.3.6",
    "karma-jshint-preprocessor": "0.0.6",
    "karma-phantomjs-launcher": "^1.0.0",
    "phantomjs-prebuilt": "^2.1.7",
    "sinon": "^1.17.2",
    "uglifyjs": "^2.4.10",
    "watchify": "^3.7.0"
  },
  "dependencies": {
    "grunt": "0.4.1",
    "jquery": "^2.1.4",
    "lodash": "4.17.14"
  },
  "scripts": {
    "lint": "jshint src test",
    "test": "karma start",
    "build": "browserify src/bootstrap.js > myangular.js",
    "build:minified": "browserify src/bootstrap.js | uglifyjs -mc > myangular.min.js"
  }
}
```

### [é—®é¢˜ä¸€: è¿è¡Œ grunt testem:run:unit å‘½ä»¤è¡ŒæŠ¥ fatal error: spawn ENOENT](https://github.com/teropa/build-your-own-angularjs/issues/88)

è§£å†³: æ ¹æ®è·¯å¾„æ‰¾åˆ°ä»¥ä¸‹æ–‡ä»¶,

```
node_modules/testem/lib folder, open browser_launcher.js
```

åœ¨ 120 è¡Œ, å°† phantomjs çš„å‚æ•°æ›¿æ¢ä¸º

```
{
    name: 'PhantomJS',
    exe: 'phantomjs.cmd',
    args: buildPhantomJsArgs,
    supported: findableByWhere
}
```

#### [é—®é¢˜äºŒ]: ReferenceError: \_ is not defined

å·²ç»åœ¨ gruntfile.js ä¸­åŠ å…¥äº†ä¸‹é¢ä¸¤è¡Œ, è¿˜æ˜¯æŠ¥é”™

```
'node_modules/lodash/index.js',
'node_modules/jquery/dist/jquery.js',
```

å¥‡æ€ªçš„æ˜¯\$, ä¹Ÿå°±æ˜¯ jquery æ˜¯æˆåŠŸå¼•å…¥çš„, index.js æœ€ç»ˆå¼•å…¥çš„æ˜¯ lodash.js

```
module.exports = require(./lodash)
```

æŸ¥çœ‹äº†ä¸‹ chrome æ§åˆ¶å°, å®é™…ä¸ŠåŠ è½½çš„åªæœ‰ index.js, è€Œå¹¶æ²¡æœ‰å°† lodash.js åŠ è½½è¿›æ¥, å› æ­¤å°† index.js æ”¹ä¸º lodash.js å°±å¯ä»¥äº†

```
'node_modules/lodash/lodash.js',
```
