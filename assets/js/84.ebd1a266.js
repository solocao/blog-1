(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{246:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("之前的代码提交很不注意提交规范,往往随性而写, 毫无章法, 最近在学习优秀源代码的过程中,颇有感慨,细节决定成败,还是注意学习.")]),t._v(" "),a("h2",{attrs:{id:"一、为什么需要好的-commit-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、为什么需要好的-commit-message"}},[t._v("#")]),t._v(" 一、为什么需要好的 commit message")]),t._v(" "),a("h2",{attrs:{id:"二、commit-message-的格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、commit-message-的格式"}},[t._v("#")]),t._v(" 二、commit message 的格式")]),t._v(" "),a("p",[t._v("commit message 的格式包括三个部分: header, body(可选), footer(可选)")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("subject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n// 空一行\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n// 空一行\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("footer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"_2-1-header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-header"}},[t._v("#")]),t._v(" 2.1 Header")]),t._v(" "),a("p",[a("strong",[t._v("(1) type")]),t._v("\ncommit 的类别, 允许使用下列的七种格式")]),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("feat: 新功能(feature)")]),t._v(" "),a("li",[t._v("fix: 修复 bug")]),t._v(" "),a("li",[t._v("docs: 文档(documentation)")]),t._v(" "),a("li",[t._v("style: 格式(不影响代码运行的变动)")]),t._v(" "),a("li",[t._v("refactor: 重构(既不是新增功能, 也不是修补 bug 的变动)")]),t._v(" "),a("li",[t._v("test: 新增测试")]),t._v(" "),a("li",[t._v("chroe: 构建过程或者辅助工具的变动")])])]),t._v(" "),a("p",[a("strong",[t._v("(2) scope")]),t._v("\n用于说明 commit 的影响范围, 视项目的不同而不同\n"),a("strong",[t._v("(3) subject")]),t._v(" "),a("code",[t._v("subject")]),t._v("是 commit 目的的简短描述，不超过 50 个字符。")]),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("以动词开头，使用第一人称现在时，比如"),a("code",[t._v("change")]),t._v("，而不是"),a("code",[t._v("changed")]),t._v("或"),a("code",[t._v("changes")])]),t._v(" "),a("li",[t._v("第一个字母小写")]),t._v(" "),a("li",[t._v("结尾不加句号（"),a("code",[t._v(".")]),t._v("）")])])]),t._v(" "),a("p",[a("strong",[t._v("type(scope): subject")]),t._v("的简单示例")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("refactor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datepicker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": 重构 datepicker 逻辑\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-body"}},[t._v("#")]),t._v(" 2.2 Body")]),t._v(" "),a("p",[t._v("todo")]),t._v(" "),a("h3",{attrs:{id:"_2-3-footer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-footer"}},[t._v("#")]),t._v(" 2.3 Footer")]),t._v(" "),a("p",[t._v("todo")]),t._v(" "),a("h2",{attrs:{id:"三、commit-工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、commit-工具"}},[t._v("#")]),t._v(" 三、commit 工具:")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Commitizen"),a("OutboundLink")],1),t._v("是一个撰写合格 Commit message 的工具。")]),t._v(" "),a("p",[t._v("安装命令如下。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g commitizen\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("然后，在项目目录里，运行下面的命令，使其支持 Angular 的 Commit message 格式。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ commitizen init cz-conventional-changelog --save --save-exact\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("以后，凡是用到"),a("code",[t._v("git commit")]),t._v("命令，一律改为使用"),a("code",[t._v("git cz")]),t._v("。这时，就会出现选项，用来生成符合格式的 Commit message。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://www.ruanyifeng.com/blogimg/asset/2016/bg2016010605.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"四、validate-commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、validate-commit-msg"}},[t._v("#")]),t._v(" 四、validate-commit-msg")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("validate-commit-msg"),a("OutboundLink")],1),t._v(" 用于检查 Node 项目的 Commit message 是否符合格式。")]),t._v(" "),a("p",[t._v("它的安装是手动的。首先，拷贝下面这个"),a("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg/blob/master/index.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS 文件"),a("OutboundLink")],1),t._v("，放入你的代码库。文件名可以取为"),a("code",[t._v("validate-commit-msg.js")]),t._v("。")]),t._v(" "),a("p",[t._v("接着，把这个脚本加入 Git 的 hook。下面是在"),a("code",[t._v("package.json")]),t._v("里面使用 "),a("a",{attrs:{href:"http://npm.im/ghooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("ghooks"),a("OutboundLink")],1),t._v("，把这个脚本加为"),a("code",[t._v("commit-msg")]),t._v("时运行。")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ghooks"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commit-msg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./validate-commit-msg.js"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("然后，每次"),a("code",[t._v("git commit")]),t._v("的时候，这个脚本就会自动检查 Commit message 是否合格。如果不合格，就会报错。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"edit markdown"')]),t._v("\nINVALID COMMIT MSG: does not match "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<type>(<scope>): <subject>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" was: edit markdown\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("参考:\n"),a("a",{attrs:{href:"https://juejin.im/post/5c383626e51d45517d2f9d0c",target:"_blank",rel:"noopener noreferrer"}},[t._v("从一件小事聊聊软件工程师的自我修养"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Commit message 和 Change log 编写指南"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5afc5242f265da0b7f44bee4",target:"_blank",rel:"noopener noreferrer"}},[t._v("优雅的提交你的 Git Commit Message"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);